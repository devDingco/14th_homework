<!DOCTYPE html>
<html lang="en">
<head>
    <title>My Diary</title>
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="./global.css">
    <link rel="stylesheet" href="./darkMode.css">
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="./pagiNation.css">
    <link rel="stylesheet" href="./modal.css">
    <script src="./cardData.js"></script>
    <script src="./darkMode.js"></script>
    <script src="./index.js"></script>
    <script src="./pagiNation.js"></script>
    <script src="./modal.js"></script>
</head>
<body>
    <header class="header">
        <div class="header-contents">
            <p class="headline-bold-24">민지의 다이어리</p>
            <div class="darkmode-wrapper">
                <p class="darkmode-title title-regular-16">다크모드</p>
                <input type="checkbox" class="toggle-input" id="toggle" onclick="toggleTheme()"/>
                <label class="toggle-label" for="toggle" > </label>
            </div>
        </div>
    </header>
    
    <div class="header-banner">
        <img class="header-banner-img" src="./public/images/Rectangle.png">
    </div>
    
    <div class="container">
        <div class="body">
            <div class="body-menu-selector-wrapper">
                <div class="body-menu">
                    <div class="body-menu-item active">
                        <p class="body-menu-item-title headline-bold-28">일기보관함</p>
                    </div>
                    <div class="body-menu-item">
                        <p class="body-menu-item-title headline-bold-24">사진보관함</p>
                    </div>
                </div>
                <div class="seletor-with-searchBar-wrapper">
                    <div class="body-selector">
                        <div class="dropdown-container">
                            <div class="dropdown-button" id="dropdownButton">
                                <span class="dropdown-text body-medium-16">전체</span>
                                <img class="dropdown-icon" src="./public/icons/light/down_fill_light_m.svg" alt="dropdown">
                            </div>
                            <div class="dropdown-menu" id="dropdownMenu">
                                <div class="dropdown-item active body-medium-16" data-value="all">
                                    <span>전체</span>
                                    <img class="check-icon" src="./public/icons/light/check_outline_light_xs.svg" alt="check">
                                </div>
                                <div class="dropdown-item body-medium-16" data-value="행복해요">
                                    <span>행복해요</span>
                                </div>
                                <div class="dropdown-item body-medium-16" data-value="슬퍼요">
                                    <span>슬퍼요</span>
                                </div>
                                <div class="dropdown-item body-medium-16" data-value="놀랐어요">
                                    <span>놀랐어요</span>
                                </div>
                                <div class="dropdown-item body-medium-16" data-value="화나요">
                                    <span>화나요</span>
                                </div>
                                <div class="dropdown-item body-medium-16" data-value="기타">
                                    <span>기타</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="search-container">
                        <img class="search-icon" src="./public/icons/light/search_outline_light_m.svg" alt="search">
                        <input type="text" class="search-input" placeholder="검색어를 입력해주세요">
                    </div>
                    <button class="add-diary-button" onclick="openModal()">
                        <img class="add-diary-button-icon" src="./public/icons/light/plus_outline_light_m.svg" alt="add">
                        <p class="add-diary-button-text body-medium-16">일기 쓰기</p>
                    </button>
                </div>
            </div>
            
            <div class="body-contents">
                <p class="body-contents-undefined-data body-medium-16">등록된 일기가 없습니다.</p>
                <div class="body-card-list" style="display: none;">
                    <script>
                        function renderCards(filterMood = 'all') {
                            const listEl = document.querySelector('.body-card-list');
                            const emptyEl = document.querySelector('.body-contents-undefined-data');
                            if (!listEl) return;

                            const data = (window.cardData && Array.isArray(cardData.getItem('diaryCardsData')))
                            ? cardData.getItem('diaryCardsData')
                            : [];

                            const filtered = (filterMood && filterMood !== 'all')
                            ? data.filter(card => card.tag === filterMood)
                            : data;

                            if (!filtered.length) {
                            listEl.style.display = 'none';
                            if (emptyEl) emptyEl.style.display = 'flex';
                            listEl.innerHTML = '';
                            return;
                            }

                            const cardsHTML = filtered.map((card, index) => `
                                <div class="diary-card" data-index="${index}">
                                    <div class="diary-card-image">
                                        <img src="${card.image}" alt="일기 이미지">
                                </div>
                                <div class="diary-card-content">
                                    <div class="card-tag-date-wrapper">
                                        <p id="${card.tagId}" class="card-tag body-regular-14">${card.tag}</p>
                                        <p class="diary-card-date body-regular-14">${card.date}</p>
                                </div>
                                    <p class="diary-card-title title-bold-18">${card.title}</p>
                                </div>
                                </div>
                            `).join('');

                            listEl.innerHTML = cardsHTML;
                            listEl.style.display = 'grid';
                            if (emptyEl) emptyEl.style.display = 'none';
                        }

                        window.renderCards = renderCards;
                        renderCards();
                    </script>
                </div>
            </div>
            
            <div class="pagination-item-wrapper">
                <div class="pagination-item">
                    <div class="pagination-item-prev">
                        <img class="pagination-item-prev-icon" src="./public/icons/light/leftdisabled_outline_light_m.svg">
                    </div>
                    
                    <div class="pagination-item-page-group">
                        <div class="pagination-item-page active">
                            <p class="pagination-item-page-text body-medium-16">1</p>
                        </div>
                        <div class="pagination-item-page">
                            <p class="pagination-item-page-text body-medium-16 text-cool-gray-60">2</p>
                        </div>
                        <div class="pagination-item-page">
                            <p class="pagination-item-page-text body-medium-16 text-cool-gray-60">3</p>
                        </div>
                        <div class="pagination-item-page">
                            <p class="pagination-item-page-text body-medium-16 text-cool-gray-60">4</p>
                        </div>
                        <div class="pagination-item-page">
                            <p class="pagination-item-page-text body-medium-16 text-cool-gray-60">5</p>
                        </div>
                    </div>
                    
                    <div class="pagination-item-next">
                        <img class="pagination-item-next-icon" src="./public/icons/light/rightenable_outline_light_m.svg">
                    </div>
                </div>
            </div>
        </div>

        <div class="modal-wrapper" id="modal" style="display: none;">
            <div class="modal-contents">
                <div class="modal-header">
                    <p class="modal-header-title headline-bold-24">일기 쓰기</p>
                </div>
                <div class="modal-body">
                    <div class="modal-body-title-wrapper">
                        <p class="modal-body-title title-semibold-20">오늘 기분은 어땟나요?</p>
                    </div>
                    <div class="modal-body-input-wrapper">
                        <div class="modal-body-input-item">
                            <input type="radio" name="mood" value="행복해요" class="modal-body-input">
                            <p class="modal-body-input-text body-medium-18">행복해요</p>
                        </div>
                        <div class="modal-body-input-item">
                            <input type="radio" name="mood" value="슬퍼요" class="modal-body-input">
                            <p class="modal-body-input-text body-medium-18">슬퍼요</p>
                        </div>
                        <div class="modal-body-input-item">
                            <input type="radio" name="mood" value="놀랐어요" class="modal-body-input">
                            <p class="modal-body-input-text body-medium-18">놀랐어요</p>
                        </div>
                        <div class="modal-body-input-item">
                            <input type="radio" name="mood" value="화나요" class="modal-body-input">
                            <p class="modal-body-input-text body-medium-18">화나요</p>
                        </div>
                        <div class="modal-body-input-item">
                            <input type="radio" name="mood" value="기타" class="modal-body-input">
                            <p class="modal-body-input-text body-medium-18">기타</p>
                        </div>
                    </div>
                    <div class="modal-body-diary-title-wrapper">
                        <p class="modal-body-diary-title body-medium-14">제목</p>
                        <input class="diary-title-input" placeholder="제목을 입력해 주세요."></input>
                    </div>
                    <div class="modal-body-diary-textarea-wrapper">
                        <p class="modal-body-diary-content-title body-medium-14">내용</p>
                        <textarea class="diary-content-textarea" placeholder="내용을 입력해 주세요."></textarea>
                    </div>
                </div>
                <div class="modal-close-btn-wrapper">
                    <button class="modal-close-btn title-semibold-18" onclick="cencelDiary()">닫기</button>
                    <button type="button" class="modal-submit-btn title-semibold-18" disabled onclick="postDiary()">등록하기</button>
                </div>
            </div>
            <div class="info-modal-wrapper" id="infoOverlay">
                <div class="info-modal" id="infoModal">
                    <p class="info-modal-title headline-bold-24">일기 등록 완료</p>
                    <p class="info-modal-content body-medium-16">등록이 완료 되었습니다.</p>
                    <button class="info-modal-close-btn title-semibold-18"onclick="closeInfoModal()">확인</button>
                </div>
            </div>
            <div class="info-close-modal-wrapper" id="infoCloseOverlay"3>
                <div class="info-close-modal" id="infoCloseModal">
                    <p class="info-close-modal-title headline-bold-24">일기 등록 취소</p>
                    <p class="info-close-modal-content body-medium-16">일기 등록을 취소 하시겠어요?</p>
                    <div class="info-close-modal-btn-wrapper">
                        <button class="info-close-modal-close-btn title-semibold-18" onclick="closeInfoCloseModal()">계속 작성</button>
                        <button class="info-close-modal-cancel-btn title-semibold-18" onclick="closeModal()">등록 취소</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer">    
        <div class="footer-contents">
            <p class="headline-bold-20">민지의 다이어리</p>
            <p class="body-regular-14">민지의 다이어리</p>
            <p id="footer-copyright">Copyright 2025. Minji Diary all rights reserved.</p>
        </div>
    </footer>

</body>
</html>