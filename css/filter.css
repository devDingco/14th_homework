
.diary-filter {
  display: inline-flex;
  
  align-items: center;
  gap: 8px;
  padding: 0px 20px;
  margin: 12px 0 20px;
}

#filter-select {
  height: 36px;
  padding: 0 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: #fff;
  font: inherit;
  outline: none;
}

#filter-select:focus {
  box-shadow: 0 0 0 3px rgba(0,0,0,0.06);
}

/* 색 변수 (원하면 variables.css에 둬도 OK) */
:root{
  --filter-bg: rgba(255,255,255,.6);
  --filter-fg: #222;
  --filter-bg-scrolled: #111;   /* 반전 배경 */
  --filter-fg-scrolled: #fff;   /* 반전 시 글자색 */
}

/* 스티키 바의 기본 상태 */
.filter-bar{
  position: sticky;     /* 스크롤 시 상단 고정 */
  top: 0;               /* 헤더가 고정이면 그 높이만큼으로 변경 */
  z-index: 100;         /* 카드보다 위에 */
  background: var(--filter-bg);
  color: var(--filter-fg);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease;
}

/* 스크롤 감지되면 반전 */
.filter-bar.is-scrolled{
  background: var(--filter-bg-scrolled);
  color: var(--filter-fg-scrolled);
  box-shadow: 0 2px 14px rgba(0,0,0,.12);
}

/* 내부 컨트롤 대비 보강(선택사항) */
.filter-bar.is-scrolled select,
.filter-bar.is-scrolled button,
.filter-bar.is-scrolled .tab{
  color: var(--filter-fg-scrolled);
  border-color: rgba(255,255,255,.35);
  background: transparent;
}
.filter-bar.is-scrolled a { color: var(--filter-fg-scrolled); }

/* 레이아웃 충돌 방지: 필터 위/아래 요소가 sticky와 겹치지 않도록 */
#filter-slot { position: relative; z-index: 0; }

/* 이미 있는 기본 레이아웃 유지 + sticky 속성 추가 */
.diary-filter {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 20px;          /* 살짝 여백 추가(선택) */
  margin: 12px 0 20px;

  /* ⬇︎ sticky & theme */
  position: sticky;           /* 상단 고정 */
  top: 0;                     /* 헤더가 고정이면 그 높이로 조정 */
  z-index: 100;               /* 카드 위에 올라오도록 */
  background: var(--filter-bg);
  color: var(--filter-fg);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  transition: background-color .2s ease, color .2s ease, box-shadow .2s ease;
}

/* 스크롤되면 반전 */
.diary-filter.is-scrolled{
  background: var(--filter-bg-scrolled);
  color: var(--filter-fg-scrolled);
  box-shadow: 0 2px 14px rgba(0,0,0,.12);
}

/* 내부 컨트롤(셀렉트 등) 반전 시 가독성 보강 */
.diary-filter.is-scrolled select,
.diary-filter.is-scrolled button,
.diary-filter.is-scrolled .tab{
  color: var(--filter-fg-scrolled);
  border-color: rgba(255,255,255,.35);
  background: transparent;
}
.diary-filter.is-scrolled a { color: var(--filter-fg-scrolled); }

/* sticky가 다른 요소와 겹치지 않게 */
#filter-slot { position: relative; z-index: 0; }

/* 기존 select 스타일 유지 */
#filter-select {
  z-index:1000;
  height: 36px;
  padding: 0 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: #fff;
  font: inherit;
  outline: none;
}
#filter-select:focus {
  box-shadow: 0 0 0 3px rgba(0,0,0,0.06);
}

/* 색 변수(이미 있으니 그대로 사용) */
:root{
  --filter-bg: rgba(255,255,255,.6);
  --filter-fg: #222;
  --filter-bg-scrolled: #111;
  --filter-fg-scrolled: #fff;
}
.diary-filter{
  position: sticky;
  top: 0;
  z-index: 100;
  /* 나머지 배경/트랜지션 등은 네가 둔 그대로 */
}
#filter-slot{ position: relative; z-index: 0; }


/* === Sticky Filter Override (단일 출처: filter.css 끝) =================== */
:root {
  --sticky-top: 0px;            /* 필요 시 헤더 높이에 맞춰 조정 */
}

/* data-속성 기준으로 단일 셀렉터 통일 */
[data-sticky="filter"].diary-filter {
  position: sticky;
  top: var(--sticky-top);
  /* 카드 위로 확실히 올라오도록: 동일 컨텍스트에서는 이 값이 승리 */
  z-index: 2000;
  /* 겹침 시 비주얼 안정화 */
  background: var(--filter-bg, #fff);
  color: var(--filter-fg, #222);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  transition: background-color .2s, color .2s, box-shadow .2s;
  /* 내부/자식의 z-index 레이어가 밖으로 새지 않도록 */
  isolation: isolate;
}

/* 스크롤 시(클래스 토글) 반전 */
[data-sticky="filter"].diary-filter.is-scrolled {
  background: var(--filter-bg-scrolled, #111);
  color: var(--filter-fg-scrolled, #fff);
  box-shadow: 0 2px 14px rgba(0,0,0,.12);
}

/* 셀렉트는 자체 z-index를 올릴 필요 없음(부모가 위에 있으므로) */
#filter-select { position: relative; z-index: 0; }
/* ======================================================================== */


/* === Stacking Reset for Filter Context (filter.css 끝) =================== */
/* 필터가 들어있는 상위 컨테이너의 스태킹 컨텍스트를 리셋 */
.container,
#main {
  position: relative;          /* 안전한 기준 컨텍스트 */
  z-index: auto;               /* 상위가 임의 z-index로 고정되지 않게 */
  transform: none !important;  /* 강제 컨텍스트 해제 */
  filter: none !important;
  perspective: none !important;
  will-change: auto !important;
  overflow: visible;           /* sticky 영역이 잘리지 않게 (문제시 이 줄만 주석 처리) */
}

/* 다이어리 레이어 기본값(필터보다 한참 아래) */
.diary-list,
.diary-card {
  position: relative;
  z-index: 1;
}

/* 카드 안의 삭제버튼은 카드 위지만, 여전히 필터(2000)보다 아래 */
.btn-delete-card { z-index: 2; }
/* ======================================================================== */
